{% extends "base.html" %}

{% block content %}
<h2>Books</h2>

<a href="{{ url_for('main.add_book') }}" class="btn btn-success mb-3">Add Book</a>
<a href="{{ url_for('main.book_lookup') }}" class="btn btn-outline-primary mb-3 ms-2">Search Open Library</a>

<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th>Title</th>
        <th>Author(s)</th>
        <th>Translator(s)</th>
        <th>Year</th>
        <th>ISBN</th>
        <th class="text-center">Epigraphs</th>
        <th class="text-center">Referents</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for book in books %}
      <tr>
        <td class="align-middle">
          <div class="d-flex flex-column">
            <a href="{{ url_for('main.view_book', book_id=book[0]) }}" class="fw-semibold text-decoration-none">{{ book[1] }}</a>
            {% if book[8] %}
            <span class="badge bg-success mt-1 align-self-start">Complete</span>
            {% endif %}
          </div>
        </td>
        <td>{{ book[4] or '—' }}</td>
        <td>{{ book[5] or '—' }}</td>
        <td>{{ book[2] or '—' }}</td>
        <td>{{ book[3] or '—' }}</td>
        <td class="text-center"><span class="badge bg-info rounded-pill">{{ book[7] if book[7] is not none else '-' }}</span></td>
        <td class="text-center"><span class="badge bg-primary rounded-pill">{{ book[6] if book[6] is not none else '-' }}</span></td>
        <td class="text-end">
          <a href="{{ url_for('main.edit_book', book_id=book[0]) }}" class="btn btn-sm btn-outline-secondary">Edit</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
